---
title: LFS之路1-关于恢复状态
tags:
  - LFS
id: 1762
comment: false
categories:
  - Linux
  - 未分类
date: 2010-07-25 13:09:00
---

很久之前就下载了LFS的一些资料，也做过一段时间，但是当时没坚持，现在把台式机弄好了，打算再完整的做一次LFS，下载的ISO是6.3，参考的资料是：
http://www.linuxsir.org/bbs/thread322894.html
我在这做一个自己的记录。
我不是用虚拟机装的 ，在自己的硬盘后面留了12G做LFS，用CD启动后运行cfdisk分区，分区完成后就开始做一些必要的准备工作。
挂载目标分区到/mnt/lfs；
在/mnt/lfs下面建立一下几个文件夹：
sources:存放源码
tools:工具链
prepare:我自己加的，用于存放一些恢复步骤的文件，主要有：
begin.sh:root用户时使用的一些初始化脚本，代码如下：
?
View Code
BASH
1
2
3
4
5
6
7
8
9
#!/bin/bash
swapon
/
dev
/
sda10
ln
-sv
/
mnt
/
lfs
/
tools
/
groupadd lfs
useradd
-s
/
bin
/
bash
-g
lfs
-m
-k
/
dev
/
null lfs
chown
-v
lfs
/
mnt
/
lfs
/
tools
chown
-v
lfs
/
mnt
/
lfs
/
sources
chown
-v
lfs
/
mnt
/
lfs
/
prepare
passwd
lfs
.bash_profile:
?
View Code
BASH
1
exec
env
-i
HOME
=
$HOME
TERM
=
$TERM
PS1
=
'\u:\w \$'
/
bin
/
bash
.bashrc:
?
View Code
BASH
1
2
3
4
5
6
set
+h
umask
022
LFS
=
/
mnt
/
lfs
LC_ALL
=POSIX
PATH
=
/
tools
/
bin:
/
bin:
/
usr
/
bin
export
LFS LC_ALL PATH
begin2.sh:切换为lfs用户运行的一个初始化脚本：
?
View Code
BASH
1
2
3
4
5
#!/bin/bash
cp
/
mnt
/
lfs
/
prepare
/
.bash
*
~
/
source
~
/
.bash_profile
export
cd
$LFS
/
sources
这样，恢复就显得简单多了。